/*
 * Copyright (C) 2017 Texas Instruments Incorporated - http://www.ti.com/
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 as
 * published by the Free Software Foundation.
 */

/* AM437x GP EVM with HDMI output */

#include "am437x-gp-evm.dts"

/delete-node/ &lcd0;

/ {
	aliases {
		display0 = &hdmi;
	};

	hdmi: connector {
		compatible = "hdmi-connector";
		label = "hdmi";

		type = "b";

		port {
			hdmi_connector_in: endpoint {
				remote-endpoint = <&sii9022_out>;
			};
		};
	};
};

&lcd_bl {
	status = "disabled";
};

&i2c1 {
	sii9022: sii9022@3b {
		compatible = "sil,sii9022";
		reg = <0x3b>;

		interrupt-parent = <&gpio3>;
		interrupts = <24 IRQ_TYPE_LEVEL_LOW>;

		ports {
			#address-cells = <1>;
			#size-cells = <0>;

			port@0 {
				reg = <0>;

				sii9022_in: endpoint {
					remote-endpoint = <&dpi_out>;
				};
			};

			port@1 {
				reg = <1>;

				sii9022_out: endpoint {
					remote-endpoint = <&hdmi_connector_in>;
				};
			};
		};
	};
};

&dpi_out {
	remote-endpoint = <&sii9022_in>;
	data-lines = <24>;
};

/* Override SelLCDorHDMI from am437x-gp-evm.dts to select HDMI */
&gpio5 {
	p8 {
		output-low;
	};
};
